<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css"   href="/css/puzzle.css">
    <link href='https://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <title>MuzzPuzzle</title>
</head>
<html>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
        <script src="https://unpkg.com/super-hands@2.1.0/dist/super-hands.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


        
        <h1 class="objective">Coloque os cubos pela ordem correta, de forma a completar a música.</h1>
        <div class="parent">
            <div class="params">
                Qual é a música?
                <input id="p1" class="tentativa" placeholder="Escreva aqui..." >
                <button class="menuButtons"  onclick="check()">Responder</button>
            </div>
        </div>

        
        <p id="result"></p>
    </div>


    <div class="parent2" style="display: flex;">
        
        <div class="legenda" style="display:inline-block; text-align:left">
            <p> Toque para ouvir música</p>
            <p   onclick="pecaAzulAudio()">Peça azul</p>
            <p  onclick="pecaVermelhalAudio()">Peça vermelha</p>
            <p   onclick="pecaVerdeAudio()">Peça verde</p>
            <p onclick="pecaAmarelaAudio()">Peça amarela</p>
        </div>
    </div>
    


    <script>
        function check(){
            // Get the value of the input field with id="numb"
            let x = document.getElementById("p1").value;
            console.log(x)
            if(checkPuzzle()){
                resposta= "<%= resposta %>"
                
                if(x==resposta){
                    text="Parabéns! Acertou!"
                }
                else{
                    text="Tente novamente!"
                }
                document.getElementById("result").innerHTML=text
            }
            else{
                text="Complete primeiro o puzzle pela ordem correta."
                document.getElementById("result").innerHTML=text
            }
            function checkPuzzle(){
                var correct=0

                const red=document.getElementById('red');
                const posRed=red.getAttribute('position');
                const xRed=posRed.x
                const yRed=posRed.y
                const zRed=posRed.z
                console.log(posRed)
                if((-1.3< xRed && xRed <-0.2) && (1.2<yRed && yRed<2.5 )&& (-8.5<zRed && zRed<-5)){
                    correct+=1
                    console.log("vermelho bem")
                }

                const blue=document.getElementById('blue')
                const posBlue=blue.getAttribute('position')
                const xBlue=posBlue.x
                const yBlue=posBlue.y
                const zBlue=posBlue.z
                console.log(posBlue)
                
            

                if((-3<xBlue && xBlue < -1.8) && (1.5<yBlue && yBlue<2.5) && (-8.5<zBlue && zBlue<-5)){
                    correct+=1
                    console.log("azul bem")
                }
                

                const green=document.getElementById('green')
                const posGreen=green.getAttribute('position')
                const xGreen=posGreen.x
                const yGreen=posGreen.y
                const zGreen=posGreen.z
                console.log(posGreen)
                if((0.3<xGreen && xGreen<1.3) && (1.5<yGreen && yGreen<2.5) && (-8.5<zGreen && zGreen<-5)){
                    correct+=1
                    console.log("verde bem")
                }

                const yellow=document.getElementById('yellow')
                const posYellow=yellow.getAttribute('position')
                const xYellow=posYellow.x
                const yYellow=posYellow.y
                const zYellow=posYellow.z
                console.log(posYellow)
                if((1.9< xYellow && xYellow <3.1) && (1.5<yYellow && yYellow<2.5) && (-8.5<zYellow && zYellow<-5)){
                    correct+=1
                    console.log("amarelo bem")
                }

                if(correct==4){
                    console.log("acertou")
                    return true
                
                }
                else{
                    console.log("errou")
                    return false
                }


            
        }
            
        };
        function pecaAzulAudio(){
            console.log("audio azul")
            let audio = new Audio('audios/audioTest1.mp3');
            audio.play();
          
        };
        function pecaVermelhalAudio(){
            console.log("audio vermelho")
            let audio = new Audio('audios/audioTest2.mp3');
            audio.play();
            
        };
        function pecaVerdeAudio(){
            console.log("audio verde")
            let audio = new Audio('audios/audioTest3.mp3');
            audio.play();
           
        };
        function pecaAmarelaAudio(){
            console.log("audio amarelo")
            let audio = new Audio('audios/audioTest4.mp3');
            audio.play();
            
        };
        
    </script>
   

    <body>
       
  
        <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;' vr-mode-ui="enabled: false">
            <a-entity  progressive-controls></a-entity>

            <a-box material="color: white; opacity: 0.5; transparent: true" position="-2.5 2 -7.1" ></a-box >
            <a-text value="Primeiro Excerto" color="black" scale="0.5 0.5 0.5" position="-2.6 1.4 -6"></a-text>

            <a-box material="color: white; opacity: 0.5; transparent: true" position ="-0.75 2 -7.1"  ></a-box >
            <a-text value="Segundo Excerto" color="black" scale="0.5 0.5 0.5" position="-1 1.4 -6"></a-text>
                
            <a-box material="color: white; opacity: 0.5; transparent: true" position ="0.75 2 -7.1"  ></a-box >
            <a-text value="Terceiro Excerto" color="black" scale="0.5 0.5 0.5" position="0.35 1.4 -6"></a-text>
    
            <a-box material="color: white; opacity: 0.5; transparent: true" position ="2.5 2 -7.1"  ></a-box >
            <a-text value="Quarto Excerto" color="black" scale="0.5 0.5 0.5" position="2 1.4 -6"></a-text>



           <a-box id="blue" color="blue" position="-1.5 3 -6.8"  grabbable></a-box >

            <a-box id="red" color="red" position ="-1.5 0 -6.3" grabbable ></a-box >
            
            <a-box id="yellow" color="yellow" position ="-1.5 -3 -5.1" grabbable ></a-box >

            <a-box  id = "green" color="green" position ="1.5 3 -6.8" grabbable ></a-box >

          </a-scene>


    </body>
    
</html>